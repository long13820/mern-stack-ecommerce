{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\GitHub\\\\mern-stack-ecommerce\\\\easy-shop\\\\Screens\\\\User\\\\UserProfile.js\";\n\nimport React, { useContext, useState, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Container } from \"native-base\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport OrderCard from \"../../Shared/OrderCard\";\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AuthGlobal from \"../../Context/store/AuthGlobal\";\nimport { logoutUser } from \"../../Context/actions/Auth.actions\";\nimport { useEffect } from 'react/cjs/react.development';\n\nvar UserProfile = function UserProfile(props) {\n  var context = useContext(AuthGlobal);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      userProfile = _useState2[0],\n      setUserProfile = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      orders = _useState4[0],\n      setOrders = _useState4[1];\n\n  useFocusEffect(useCallback(function () {\n    if (context.stateUser.isAuthenticated === false || context.stateUser.isAuthenticated === null) {\n      props.navigation.navigate(\"Login\");\n    }\n\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      axios.get(baseURL + \"users/\" + context.stateUser.user.sub, {\n        headers: {\n          Authorization: \"Bearer \" + res\n        }\n      }).then(function (user) {\n        return setUserProfile(user.data);\n      });\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"orders\").then(function (x) {\n      var data = x.data;\n      console.log(data);\n      var userOrders = data.filter(function (order) {\n        return order.user._id === context.stateUser.user.sub;\n      });\n      setOrders(userOrders);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    return function () {\n      setUserProfile();\n      setOrders();\n    };\n  }, [context.stateUser.isAuthenticated]));\n  return React.createElement(Container, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 8\n    }\n  }, React.createElement(ScrollView, {\n    contentContainerStyle: styles.subContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 30\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }\n  }, userProfile ? userProfile.name : \"\"), React.createElement(View, {\n    style: {\n      marginTop: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }\n  }, React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, \"Email: \", userProfile ? userProfile.email : \"\"), React.createElement(Text, {\n    style: {\n      margin: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, \"Phone: \", userProfile ? userProfile.phone : \"\")), React.createElement(View, {\n    style: {\n      marginTop: 80\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 16\n    }\n  }, React.createElement(Button, {\n    title: \"Sign Out\",\n    onPress: function onPress() {\n      return [AsyncStorage.removeItem(\"jwt\"), logoutUser(context.dispatch)];\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.order,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 16\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 20\n    }\n  }, \"My Orders\"), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 20\n    }\n  }, orders ? orders.map(function (x) {\n    return React.createElement(OrderCard, _extends({\n      key: x.id\n    }, x, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 39\n      }\n    }));\n  }) : React.createElement(View, {\n    style: styles.order,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 28\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 32\n    }\n  }, \"You have no orders\"))))));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\"\n  },\n  subContainer: {\n    alignItems: \"center\",\n    marginTop: 60\n  },\n  order: {\n    marginTop: 20,\n    alignItems: \"center\",\n    marginBottom: 60\n  }\n});\nexport default UserProfile;","map":{"version":3,"names":["React","useContext","useState","useCallback","Container","useFocusEffect","AsyncStorage","OrderCard","axios","baseURL","AuthGlobal","logoutUser","useEffect","UserProfile","props","context","userProfile","setUserProfile","orders","setOrders","stateUser","isAuthenticated","navigation","navigate","getItem","then","res","get","user","sub","headers","Authorization","data","catch","error","console","log","x","userOrders","filter","order","_id","styles","container","subContainer","fontSize","name","marginTop","margin","email","phone","removeItem","dispatch","map","id","StyleSheet","create","flex","alignItems","marginBottom"],"sources":["D:/GitHub/mern-stack-ecommerce/easy-shop/Screens/User/UserProfile.js"],"sourcesContent":["import React, { useContext, useState, useCallback } from 'react';\r\nimport { View, Text, ScrollView, Button, StyleSheet } from 'react-native';\r\nimport { Container } from \"native-base\"\r\nimport { useFocusEffect } from \"@react-navigation/native\"\r\nimport AsyncStorage from \"@react-native-community/async-storage\"\r\nimport OrderCard from \"../../Shared/OrderCard\"\r\n\r\nimport axios from \"axios\"\r\nimport baseURL from \"../../assets/common/baseUrl\"\r\n\r\nimport AuthGlobal from \"../../Context/store/AuthGlobal\"\r\nimport { logoutUser } from \"../../Context/actions/Auth.actions\"\r\nimport { useEffect } from 'react/cjs/react.development';\r\n\r\nconst UserProfile = (props) => {\r\n    const context = useContext(AuthGlobal)\r\n    const [userProfile, setUserProfile] = useState()\r\n    const [orders, setOrders] = useState()\r\n\r\n    useFocusEffect(\r\n        useCallback(() => {\r\n        if (\r\n            context.stateUser.isAuthenticated === false || \r\n            context.stateUser.isAuthenticated === null\r\n        ) {\r\n            props.navigation.navigate(\"Login\")\r\n        }\r\n\r\n        AsyncStorage.getItem(\"jwt\")\r\n            .then((res) => {\r\n                axios\r\n                    .get(`${baseURL}users/${context.stateUser.user.sub}`, {\r\n                        headers: { Authorization: `Bearer ${res}` },\r\n                    })\r\n                    .then((user) => setUserProfile(user.data))\r\n            })\r\n            .catch((error) => console.log(error))\r\n\r\n        axios\r\n        .get(`${baseURL}orders`)\r\n        .then((x) => {\r\n            const data = x.data;\r\n            console.log(data)\r\n            const userOrders = data.filter(\r\n                (order) => order.user._id === context.stateUser.user.sub\r\n            );\r\n            setOrders(userOrders);\r\n        })\r\n        .catch((error) => console.log(error))\r\n\r\n        return () => {\r\n            setUserProfile();\r\n            setOrders();\r\n        }\r\n\r\n    }, [context.stateUser.isAuthenticated]))\r\n\r\n    return (\r\n       <Container style={styles.container}>\r\n           <ScrollView contentContainerStyle={styles.subContainer}>\r\n               <Text style={{ fontSize: 30 }}>\r\n                   {userProfile ? userProfile.name : \"\" }\r\n               </Text>\r\n               <View style={{ marginTop: 20 }}>\r\n                    <Text style={{ margin: 10 }}>\r\n                        Email: {userProfile ? userProfile.email : \"\"}\r\n                    </Text>\r\n                    <Text style={{ margin: 10 }}>\r\n                        Phone: {userProfile ? userProfile.phone : \"\"}\r\n                    </Text>\r\n               </View>\r\n               <View style={{ marginTop: 80 }}>\r\n                    <Button title={\"Sign Out\"} onPress={() => [\r\n                        AsyncStorage.removeItem(\"jwt\"),\r\n                        logoutUser(context.dispatch)\r\n                    ]}/>\r\n               </View>\r\n               <View style={styles.order}>\r\n                   <Text style={{ fontSize: 20 }}>My Orders</Text>\r\n                   <View>\r\n                       {orders ? (\r\n                           orders.map((x) => {\r\n                               return <OrderCard key={x.id} {...x} />;\r\n                           })\r\n                       ) : (\r\n                           <View style={styles.order}>\r\n                               <Text>You have no orders</Text>\r\n                           </View>\r\n                       )}\r\n                   </View>\r\n               </View>\r\n           </ScrollView>\r\n       </Container>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: \"center\"\r\n    },\r\n    subContainer: {\r\n        alignItems: \"center\",\r\n        marginTop: 60\r\n    },\r\n    order: {\r\n        marginTop: 20,\r\n        alignItems: \"center\",\r\n        marginBottom: 60\r\n    }\r\n})\r\n\r\nexport default UserProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}